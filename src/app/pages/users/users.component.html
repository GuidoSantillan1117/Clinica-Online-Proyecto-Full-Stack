<div *ngIf="registroAbierto"class="mdl-overlay">
    <div class="mdl-content">
        <app-register [administrador]="true"></app-register>
    </div>
</div>

<div class="container-fluid d-flex flex-column min-vh-100">
  <div class="p-3">
    <div class="d-flex  flex-column w-100 align-items-center justify-content-center mb-4">
      <h1 class="text-center mb-2">Usuarios</h1>
      <h4 class="text-center mb-1">Lista de usuarios registrados en el sistema.</h4>
    </div>

    <div class="text-end my-2">
      <button (click)="mostrarRegistro()"class="btn btn-light btn-sm bg-light-blue text-white p-2" style="border-radius: 20px;">
        <strong style="font-size: 18px;">+</strong> Agregar un usuario
      </button>
    </div>
    <div class="row fw-bold text-center  border-bottom pb-2" style="border-top: 2px solid black;">
      <div class="col-2 mt-3">Rol</div>
      <div class="col-2 mt-3">Nombre</div>
      <div class="col-2 mt-3">Apellido</div>
      <div class="col-2 mt-3">DNI</div>
      <div class="col-2 mt-3">Edad</div>
      <div class="col-2 mt-3">Estado</div>
    </div>

    @for (u of usuarios(); track u.id) {
    <div class="grid w-100 border-bottom">
      <div class="row align-items-center p-2">
        <div class="col-2 text-center">
          {{u.rol.toLocaleUpperCase()}}
        </div>
        <div class="col-2 text-center">
          {{ u.nombre }}
        </div>
        <div class="col-2 text-center ">
          {{ u.apellido }}
        </div>
        <div class="col-2 text-center">
          {{ u.dni }}
        </div>
        <div class="col-2  text-center">
          {{ u.edad }}
        </div>

        @if (u.rol === 'especialista') {
        <div class="col-2 text-center">
          <p [ngClass]="{
            'text-success': u.estado === 'Aprobado',
            'text-danger': u.estado === 'Rechazado',
            'text-warning': u.estado === 'Pendiente'
    }">
            {{ u.estado }}
          </p>

          <div *ngIf="u.estado === 'Pendiente'" class="d-flex justify-content-center gap-2">
            <button (click)="actualizarEstadoEspecialista(u, true)" class="btn btn-sm btn-success" title="Aprobar">
              <i class="bi bi-check-lg"></i>
            </button>
            <button (click)="actualizarEstadoEspecialista(u, false)" class="btn btn-sm btn-danger" title="Rechazar">
              <i class="bi bi-x-lg"></i>
            </button>
          </div>
        </div>
        }
        @else{
        <div class="col-2  text-center">
          {{ u.estado }}
        </div>
        }


        <!-- <div class="col-2  text-center">
          @if(u.rol === 'especialista')
          {
            {{consultarEstadoEspecialista(u.id)}}
          }
        </div> -->

      </div>
    </div>
    }

  </div>
</div>